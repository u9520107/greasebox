{"version":3,"sources":["load-map.js"],"names":[],"mappings":";;;;IAAO,OAAO,sCAAM,UAAU;;IACvB,IAAI,sCAAM,QAAQ;;IAClB,EAAE,sCAAM,IAAI;;IACZ,IAAI,sCAAM,MAAM;;IAChB,KAAK,sCAAM,OAAO;;IAClB,KAAK,sCAAM,OAAO;;AAEzB,IAAI,GAAG,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC;;;;AAI3B,SAAS,OAAO,CAAC,GAAG,EAAE;AACpB,MAAI,CAAC,GAAG,EAAE;AACR,OAAG,GAAG,MAAM,CAAC;GACd;AACD,SAAO,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE;AAC5C,QAAI,IAAI,CAAC,MAAM,EAAE,EAAE;AACjB,UAAI,EAAE,CAAC;KACR,MAAM;AACL,UAAI,IAAI,GAAG,IAAI,CAAC;AAChB,QAAE,CAAC,aAAa;AACd,YAAI,OAAO,GAAG,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;AAC9B,YAAI,GAAG,CAAC;AACR,YAAI;AACF,cAAI,MAAM,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE;AAC9B,eAAG,GAAG,IAAI,CAAC,KAAK,EAAC,MAAM,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA,CAAC,CAAC;WAChD,MAAM;AACL,eAAG,GAAG;AACJ,qBAAO,EAAE,CAAC;AACV,kBAAI,EAAE,IAAI,CAAC,QAAQ;AACnB,mBAAK,EAAE,EAAE;AACT,sBAAQ,EAAE,EAAE;AACZ,qBAAO,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC;AACxB,4BAAc,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AAC7C,wBAAU,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG;aAC3D,CAAC;WACH;AACD,cAAI,CAAC,SAAS,GAAG,GAAG,CAAC;AACrB,cAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChB,cAAI,EAAE,CAAC;SACR,CAAC,OAAO,GAAG,EAAE;AACZ,iBAAO,CAAC,GAAG,OAAM,KAAK,CAAC,IAAI,CAAE,SAAS,CAAE,wCAAoC,KAAK,CAAC,GAAG,CAAE,IAAI,CAAC,IAAI,CAAE,CAAG,CAAC;AACtG,aAAG,CAAC,GAAG,CAAC,CAAC;AACT,cAAI,CAAC,GAAG,CAAC,CAAC;SACX;OACF,CAAC,CAAC;KACJ;GACF,CAAC,CAAC;CACJ;iBACc,OAAO","file":"load-map.js","sourceRoot":"/source/","sourcesContent":["import through from 'through2';\nimport cofs from './cofs';\nimport co from 'co';\nimport path from 'path';\nimport chalk from 'chalk';\nimport debug from 'debug';\n\nlet log = debug('loadMap');\n/**\n * @function loadMap\n */\nfunction loadMap(ext) {\n  if (!ext) {\n    ext = '.map';\n  }\n  return through.obj(function (file, enc, next) {\n    if (file.isNull()) {\n      next();\n    } else {\n      var self = this;\n      co(function* () {\n        var mapFile = file.path + ext;\n        var map;\n        try {\n          if (yield cofs.exists(mapFile)) {\n            map = JSON.parse(yield cofs.readFile(mapFile));\n          } else {\n            map = {\n              version: 3,\n              file: file.relative,\n              names: [],\n              mappings: '',\n              sources: [file.relative],\n              sourcesContent: [file.contents.toString(enc)],\n              sourceRoot: '/' + path.relative(file.cwd, file.base) + '/'\n            };\n          }\n          file.sourceMap = map;\n          self.push(file);\n          next();\n        } catch (err) {\n          console.log(`[${ chalk.cyan( 'loadMap' ) }] Failed to load source map for ${chalk.red( file.path )}`);\n          log(err);\n          next(err);\n        }\n      });\n    }\n  });\n}\nexport default loadMap;\n"]}